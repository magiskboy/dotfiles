#############################
########## Settings
#############################

set -g default-command $SHELL
set -g escape-time 0
set-option -g default-terminal "screen-256color"
set -g default-terminal 'tmux-256color' # replace this with your custom term-info name
set -ga terminal-overrides '*:Ss=\E[%p1%d q:Se=\E[ q' # this is for the cursor shape
set-window-option -g mode-keys vi
set-option -g status-position top
# Refresh status line every 5 seconds - Good for when music is playing / update time etc
set -g status-interval 5

# Start window and pane indices at 1.
set -g base-index 1
set -g pane-base-index 0

# Length of tmux status line
set -g status-left-length 60
set -g status-right-length 150

set-option -g status "on"

setw -g history-limit 10000


#############################
########## Bindings
#############################

bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle

# Automatically set window title
set-window-option -g automatic-rename on
set-option -g set-titles on

# Use | and - to split a window vertically and horizontally instead of " and % respoectively
unbind '"'
unbind %
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Switch betewen panes using alt + arrow
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Use shift + arrow key to move between windows in a session
bind -n S-Left  previous-window
bind -n S-Right next-window

# Use r to quickly reload tmux settings
unbind r
bind r \
	source-file ~/.tmux.conf \;\
	display 'Reloaded tmux config'

# Prefix + / to search
bind-key / copy-mode \; send-key ?

# Prefix + h to clear screen and history buffer
bind y \
    send-keys "C-c; clear && tmux clear-history" \;\
    send-keys "Enter" \;\
    display 'Screen cleared'


#############################
########## Color scheme
#############################
# AYU SCHEMA: https://github.com/ayu-theme/ayu-colors

ayu_light_black="#0a0e14"
ayu_black="#000000"
ayu_blue="#39bae6"
ayu_yellow="#e6b450"
ayu_light_red="#d96c75"
ayu_red="#ff3333"
ayu_white="#b3b1ad"
ayu_green="#c2d94c"
ayu_visual_grey="#b3b1ad"
ayu_comment_grey="#4d5566"
ayu_orange="#ff8F40"

get() {
   local option=$1
   local default_value=$2
   local option_value="$(tmux show-option -gqv "$option")"

   if [ -z "$option_value" ]; then
      echo "$default_value"
   else
      echo "$option_value"
   fi
}

set() {
   local option=$1
   local value=$2
   tmux set-option -gq "$option" "$value"
}

setw() {
   local option=$1
   local value=$2
   tmux set-window-option -gq "$option" "$value"
}

set "status" "on"
set "status-justify" "left"

set "status-left-length" "100"
set "status-right-length" "100"
set "status-right-attr" "none"

set "message-fg" "$ayu_white"
set "message-bg" "$ayu_black"

set "message-command-fg" "$ayu_white"
set "message-command-bg" "$ayu_black"

set "status-attr" "none"
set "status-left-attr" "none"

setw "window-status-fg" "$ayu_black"
setw "window-status-bg" "$ayu_black"
setw "window-status-attr" "none"

setw "window-status-activity-bg" "$ayu_black"
setw "window-status-activity-fg" "$ayu_black"
setw "window-status-activity-attr" "none"

setw "window-status-separator" ""

set "window-style" "fg=$ayu_comment_grey"
set "window-active-style" "fg=$ayu_white"

set "pane-border-fg" "$ayu_white"
set "pane-border-bg" "$ayu_black"
set "pane-active-border-fg" "$ayu_green"
set "pane-active-border-bg" "$ayu_black"

set "display-panes-active-colour" "$ayu_yellow"
set "display-panes-colour" "$ayu_blue"

set "status-bg" "$ayu_light_black"
set "status-fg" "$ayu_white"

set "@prefix_highlight_fg" "$ayu_black"
set "@prefix_highlight_bg" "$ayu_green"
set "@prefix_highlight_copy_mode_attr" "fg=$ayu_black,bg=$ayu_green"
set "@prefix_highlight_output_prefix" "   "

status_widgets=$(get "@ayu_widgets")
date_format=$(get "@ayu_date_format" "%H:%M")

set "status-right" "#[fg=$ayu_black,bg=$ayu_orange,nounderscore,noitalics] ${date_format} "

set "status-left" ""
# [fg=$ayu_black,bg=$ayu_orange,nobold] #W 

set "window-status-current-format" "#[fg=$ayu_light_black,bg=$ayu_blue,nobold] #I "
set "window-status-format" "#[fg=$ayu_white,bg=$ayu_black,nobold] #I "
